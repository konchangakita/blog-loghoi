---
description: DockerとKubernetes設定用ルール
globs: ["**/dockerfile*", "**/Dockerfile*", "**/docker-compose*.yml", "**/docker-compose*.yaml", "**/k8s/**", "**/*.k8s.yaml", "**/*.k8s.yml"]
alwaysApply: false
---

# Docker & Kubernetes ルール

## Docker
- マルチステージビルドを活用する
- セキュリティベストプラクティスに従う
- 不要なレイヤーを避ける
- .dockerignoreを適切に設定する
- ベースイメージは軽量なものを選択する

## Docker Compose
- サービス間の依存関係を適切に設定する
- 環境変数ファイルを使用する
- ボリュームマウントを適切に設定する
- ネットワーク設定を明確にする

## Kubernetes
- リソース制限を適切に設定する
- ConfigMap、Secretを適切に使用する
- ヘルスチェックを実装する
- スケーリング戦略を考慮する
- ネームスペースを適切に使用する

## デプロイメント
- ローリングアップデートを設定する
- ロールバック戦略を準備する
- モニタリングとロギングを設定する
- セキュリティポリシーを適用する

## 設定管理
- 環境別の設定ファイルを管理する
- 機密情報はSecretで管理する
- 設定の変更履歴を追跡する
- 設定の検証を行う