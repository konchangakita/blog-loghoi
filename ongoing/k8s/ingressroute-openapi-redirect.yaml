apiVersion: traefik.io/v1alpha1
kind: IngressRoute
metadata:
  name: loghoi-openapi-redirect
  namespace: loghoihoi
  labels:
    app: loghoi
    component: openapi-redirect
spec:
  entryPoints:
    - web
    - websecure
  routes:
    # /api/openapi.json を /openapi.json にリダイレクト
    - match: Path(`/api/openapi.json`)
      kind: Rule
      priority: 20
      services:
        - name: loghoi-backend-service
          port: 7776
      middlewares:
        - name: openapi-rewrite
          namespace: loghoihoi

